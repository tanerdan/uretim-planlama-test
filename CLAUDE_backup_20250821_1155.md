# 📋 Üretim Planlama Yazılımı - Claude Code Dokümantasyonu

## 🎯 Proje Hakkında
Django tabanlı üretim planlama sistemi. Müşteri siparişlerinden başlayarak malzeme ihtiyaç planlaması ve satın alma süreçlerini yönetir.

## 🏗️ Proje Yapısı
```
D:\Documents_D\SoftwareDevelopment\uretim-planlama\
├── venv\                    # Virtual environment
├── backend\
│   ├── production\         # Ana uygulama
│   │   ├── models.py      # 13 model tanımlı
│   │   ├── admin.py       # Admin özelleştirmeleri
│   │   ├── serializers.py # API serializers
│   │   ├── views.py       # API views
│   │   ├── urls.py        # API routes
│   │   └── templates/admin/  # Custom templates
│   ├── settings.py        # Django ayarları
│   └── urls.py           # Ana URL yapılandırması
├── media\                 # Yüklenen dosyalar
├── manage.py
└── requirements.txt
```

## 🚀 Kurulum ve Çalıştırma
```bash
# Virtual environment aktifleştir
venv\Scripts\activate

# Bağımlılıkları yükle
pip install -r requirements.txt

# Veritabanı migrasyonları
python manage.py migrate

# Süper kullanıcı oluştur (gerekirse)
python manage.py createsuperuser

# Sunucuyu başlat
python manage.py runserver

# Admin paneline erişim
http://127.0.0.1:8000/admin/
```

## ✅ Tamamlanan Özellikler

### 1. Temel Modüller
- **Müşteri Yönetimi**: Tam CRUD, iletişim bilgileri, aktif/pasif durumu
- **Ürün Yönetimi**: Hammadde/ara ürün/bitmiş ürün kategorileri, stok takibi
- **Sipariş Yönetimi**: Müşteri siparişleri, çoklu kalem, dosya yükleme
- **BOM (Bill of Materials)**: Çok seviyeli ürün reçeteleri

### 2. MRP (Malzeme İhtiyaç Planlama) ⭐
- Bekleyen siparişleri toplu seçme
- BOM'ları **derinlemesine analiz** (ara ürünleri açarak hammaddelere ulaşma)
- **Recursif malzeme hesaplama** - çok seviyeli BOM desteği
- Malzeme ihtiyacı için "Satın Al" / "Stoktan Kullan" seçimi
- Malzeme ihtiyaçlarını veritabanına kaydetme
- İlgili sipariş ve ürün bilgilerini JSON olarak saklama

### 3. Satın Alma Modülü ⭐
- **Tedarikçi yönetimi**: Tam bilgi seti, vergi bilgileri
- **Satın alma siparişi oluşturma**: Malzeme ihtiyaçlarından otomatik
- **Çoklu para birimi**: Her satır için ayrı para birimi
- **Esnek teslimat**: Her malzeme için ayrı teslim tarihi
- **Sipariş export/yazdırma**: PDF template hazır
- **Güncel teslim tarihi takibi**: Orijinal vs güncel tarih
- **Değişiklik geçmişi**: Tüm teslim tarihi güncellemeleri kayıt altında
- **Liste görünümünden hızlı düzenleme**: Inline editing

### 4. Durum Takibi
- **Sipariş Durumları**: `beklemede` → `malzeme_planlandi` → `uretimde` → `tamamlandi`
- **Malzeme İhtiyaç Durumları**: `beklemede` → `siparis_verildi` → `kismi_geldi` → `tamamlandi`

### 5. Admin Panel Özelleştirmeleri
- **Hover BOM görüntüleme**: Ürün listesinde reçete detayları
- **Stok durumu göstergeleri**: Renk kodlu durumlar
- **Malzeme planlama arayüzü**: Özel template ve workflow
- **Toplu işlemler**: Çoklu sipariş seçimi ve planlama
- **Otomatik sipariş no üretimi**: Tarih bazlı otomatik kodlama

## 📊 Veritabanı Modelleri

### Ana Modeller
1. **Musteri** - Müşteri bilgileri ve iletişim
2. **Urun** - Ürün tanımları (hammadde/ara ürün/bitmiş ürün)
3. **UrunRecete** - Ürün reçeteleri (BOM) - recursive yapı
4. **Siparis** - Müşteri siparişleri
5. **SiparisKalem** - Sipariş detay kalemleri
6. **SiparisDosya** - Sipariş ek dosyaları

### MRP Modülü
7. **MalzemePlanlama** (Proxy) - Planlama arayüzü
8. **MalzemeIhtiyac** - Hesaplanan malzeme ihtiyaçları

### Satın Alma Modülü
9. **Tedarikci** - Tedarikçi bilgileri
10. **SatinAlmaSiparisi** - Satın alma siparişleri (durum takibi eklendi)
11. **SatinAlmaKalemi** - Satın alma detay kalemleri (tamamlanma izleme)
12. **SatinAlmaTeslimGuncelleme** - Teslim tarihi değişiklik geçmişi

### Malzeme Geliş Modülü ⭐ (YENİ)
13. **MalzemeGelis** - Malzeme teslim alımları
   - Çoklu para birimi desteği
   - Kısmi teslimat takibi
   - Otomatik sipariş kapatma
   - Dosya yükleme (irsaliye/fatura)
   - Form validasyonu ve otomatik hesaplama

## ✅ Malzeme Geliş Sistemi Tamamlandı

### Yeni Özellikler
1. **MalzemeGelis Modeli** ✅
   - Satın alma siparişi ve kalemine bağlı
   - Çoklu para birimi (TRY, USD, EUR, GBP)
   - Birim fiyat ve otomatik toplam hesaplama
   - İrsaliye/fatura no takibi
   - Dosya yükleme desteği

2. **Otomatik Sipariş Kapatma** ✅ 
   - Tüm kalemler tamamlandığında sipariş durumu otomatik "tamamlandı"
   - Sistem kullanıcısı ile otomatik log kaydı
   - SatinAlmaTeslimGuncelleme tablosuna not ekleme

3. **Durum Takibi ve Görselleştirme** ✅
   - Kısmi teslimat desteği (bekliyor/kısmi/tam/fazla)
   - Renk kodlu yüzdelik göstergeler
   - Emoji'li durum ikonları
   - Liste görünümünde tüm siparişlerin durumu
   - Kalem sayısı özeti (Toplam/Tamamlanan/Kısmi/Bekleyen)

4. **Raporlama ve Analiz Sistemi** ✅
   - Malzeme geliş raporları dashboard'u
   - İstatistik paneli (toplam geliş, son 30 gün, para birimi toplamları)
   - Tedarikçi performans raporu
   - Zamanında teslimat analizi
   - Excel/CSV export özelliği
   - Hızlı filtreleme butonları (bugün/son 7 gün/son 30 gün)

5. **Admin Panel Geliştirmeleri** ✅
   - Custom template'ler ile zengin arayüz
   - JavaScript ile dinamik hesaplamalar
   - Birim bilgisi otomatik gösterimi
   - Inline form validasyonu
   - Rapor linkleri ve analiz araçları

## 💡 Önemli Teknik Notlar

### MRP Algoritması
- `calculate_materials()` fonksiyonu recursive BOM çözümü yapar
- Çok seviyeli ürün ağaçlarını destekler
- Ara ürünleri otomatik olarak hammaddelere kadar açar
- Malzeme ihtiyaçlarını toplar ve birleştirir

### Admin Özelleştirmeleri
- Custom template'ler: `templates/admin/` dizininde
- JavaScript entegrasyonu: Modal'lar ve dinamik formlar
- Hover tooltip'ler: CSS ve JS ile implement edildi

### API Katmanı
- Django REST Framework kullanılıyor
- Serializer'lar hazır ancak frontend henüz yok
- Gelecekte React/Vue.js frontend planlanıyor

## 🔧 Geliştirme Komutları

```bash
# Yeni migration oluştur
python manage.py makemigrations

# Migration'ları uygula
python manage.py migrate

# Admin kullanıcısı oluştur
python manage.py createsuperuser

# Shell'de test
python manage.py shell

# Statik dosyaları topla (production için)
python manage.py collectstatic
```

## 📝 Kod Konvansiyonları
- Model isimleri: Türkçe (Musteri, Urun, Siparis)
- Field isimleri: Türkçe snake_case (musteri_adi, olusturulma_tarihi)
- Verbose_name: Türkçe UI metinleri
- Admin customization: Türkçe arayüz
- Docstring'ler: Türkçe açıklamalar

## 🚫 Bilinen Sınırlamalar
- Frontend arayüzü yok (sadece Django Admin)
- Gerçek zamanlı stok takibi eksik
- Üretim modülü henüz geliştirilmedi
- Raporlama sistemi minimal

## 📋 Gelecek Özellikler (Roadmap)
1. **Malzeme Geliş Modülü** (Sıradaki)
2. **Üretim Modülü**: İş emirleri, üretim takibi
3. **Stok Hareket Modülü**: Detaylı stok hareketleri
4. **Raporlama**: Grafikler, analizler
5. **Frontend**: React/Vue.js web arayüzü
6. **Mobile App**: Üretim katı için mobile uygulama
7. **Dashboard**: KPI'lar ve görsel raporlar

---
*Son güncelleme: 2025-08-21*
*Claude Code session'ları için hazırlanmıştır*